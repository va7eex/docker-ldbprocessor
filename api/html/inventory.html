{% extends "base.html" %}
{% block content %}
       <style>
            .button-success,
            .button-error,
            .button-warning,
            .button-secondary {
                color: white;
                border-radius: 4px;
                text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            }
    
            .button-success {
                background: rgb(28, 184, 65);
                /* this is a green */
            }
    
            .button-error {
                background: rgb(202, 60, 60);
                /* this is a maroon */
            }
    
            .button-warning {
                background: rgb(223, 117, 20);
                /* this is an orange */
            }
    
            .button-secondary {
                background: rgb(66, 184, 221);
                /* this is a light blue */
            }

            /* https://www.w3schools.com/howto/howto_css_switch.asp */
            /* The switch - the box around the slider */
            .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            }

            /* Hide default HTML checkbox */
            .switch input {
            opacity: 0;
            width: 0;
            height: 0;
            }

            /* The slider */
            .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            }

            .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            }

            input:checked + .slider {
            background-color: #2196F3;
            }

            input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
            }

            input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
            }

            /* Rounded sliders */
            .slider.round {
            border-radius: 34px;
            }

            .slider.round:before {
            border-radius: 50%;
            }
        </style>
        <script>
            $(document).ready(function(){
                $.get('/bc/getstatus', $(this).serialize(), function(response){
                    $("#statusreport-upc").val('');
                    $("#statusreport-quantity").val('');
                    return false
                });
                $('#inventoryscan').submit(function(){

                    var quantity = $('#inventoryscan-quantity').val()
                    var numlock = $('#inventoryscan-numberlock').is(':checked')
                    $('#productupdate-inventory').val($('#inventoryscan-inventory').val())
                    $.post($(this).attr('action'), $(this).serialize(), function(response){
                        $("#statusreport-upc").val(response.upc);
                        $("#statusreport-quantity").val(response.quantity);
                    },'json');

                    //visual feedback something happened.
                    $('#inventoryscan-submit').css('background-color', 'rgb(28, 184, 65)');
                    setTimeout(function(){ $('#inventoryscan-submit').css('background-color', ''); }, 100);

                    $(this).trigger("reset");
                    if(numlock){
                        $('#inventoryscan-numberlock').prop('checked', true);
                        $('#inventoryscan-quantity').val(quantity)
                    }
                    return false;
                });
                $( "#inventoryscan-quantity" ).focus(function() {
                    $("#inventoryscan-quantity").val('');
                });
                $('#productupdate').submit(function(){
                    $.post($(this).attr('action'), $(this).serialize(), function(response){
                    },'json');

                    //visual feedback something happened.
                    $('#scangroup-submit').css('background-color', 'rgb(28, 184, 65)');
                    setTimeout(function(){ $('#scangroup-submit').css('background-color', ''); }, 100);

                    $(this).trigger("reset");
                    $('#productupdate-barcode').css('background-color', '');
                    return false;
                });
                $('#exportlist').submit(function(){
                    var answer = window.confirm("Export list to file?");
                    if (answer) {
                        $.post($(this).attr('action'), $(this).serialize(), function(response){
                            $("#statusreport-upc").val('');
                            $("#statusreport-quantity").val('');
                        },'json');
                    }
                    else {
                        //some code
                    }
                    return false;
                });
                $('#dellist').submit(function(){
                    var answer = window.confirm("Delete all?");
                    if (answer) {
                        $.post($(this).attr('action'), $(this).serialize(), function(response){
                            $("#statusreport-upc").val('');
                            $("#statusreport-quantity").val('');
                        },'json');
                    }
                    else {
                        //some code
                    }
                    return false;
                });
            });
        </script>
        <div>
        <form id='inventoryscan' class="pure-form pure-form-aligned" action="/inv/scan" method="post">
            <fieldset>
                <legend id="inventoryscan-legend">Inventory Counting</legend>
                <div class="pure-control-group">
                    <label for="inventoryscan-inventory">Barcode</label>
                    <input type="text" id="inventoryscan-inventory" name="upc" placeholder="Barcode" required="" autofocus/>
                    <input type="number" id="inventoryscan-quantity" name="quantity" placeholder="Qty" value="1" min="1" max="999"/>
                    <label class="switch">
                        <input id="inventoryscan-numberlock" type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <span class="pure-form-message-inline desktop-only">Scan one barcode per box, scan the largest barcode on the box.</span>
                </div>
                <div class="pure-control-group">
                    <label for="checkbox-radio-option-two" class="pure-radio desktop-only"> </label>
                        <input type="radio" id="checkbox-radio-option-two" name="addremove" value="add" checked="" /> Add</label>
                        <input type="radio" id="checkbox-radio-option-three" name="addremove" value="remove" /> Remove</label>
                </div>
                <div class='pure-controls'>
                        <button id='barcodescan-submit' type="submit" class="pure-button pure-button-primary" name=submit>Submit</button>
                </div>
            </fieldset>
        </form>
        <form id='productupdate' class="pure-form pure-form-aligned" action="/bc/linksku", method="get">
            <fieldset>
                <legend>SKU Update</legend>

                <div class="pure-control-group">
                    <label for='productupdate-barcode'>Barcode</label>
                    <input type="text" id='productupdate-barcode' name='barcode' placeholder="Barcode" required=""/>
                    <span class="pure-form-message-inline desktop-only">placeholder</span>
                </div>
                <div class='pure-control-group'>
                    <label for='productupdate-sku'>SKU</label>
                    <input type="text" id='productupdate-sku' name='sku' placeholder="SKU" required=""/>
                    <span class="pure-form-message-inline desktop-only">placeholder</span>
                </div>
                <div class="pure-controls">
                <button id='productupdate-submit' type="submit" class="pure-button pure-button-primary" name="submit">Submit</button>
                </div>
            </fieldset>
        </form>
        <form id='statusreport' class='pure-form pure-form-aligned' action='/bc/getstatus' method='get'>
            <legend id="statusreport-legend">Status Report</legend>
            <div class="pure-control-group">
                <label for="statusreport-upc">UPC</label>
                <input type="text" id="statusreport-upc" name="upc" placeholder="UPC" readonly/>
                <span class="pure-form-message-inline desktop-only">placeholder</span>
            </div>
            <div class="pure-control-group">
                <label for="statusreport-quantity">Total</label>
                <input type="text" id="statusreport-quantity" name="quantity" placeholder="Quantity" readonly/>
                <span class="pure-form-message-inline desktop-only">Total number of products scanned.</span>
            </div>
        </form>
        <form id='exportlist' class="pure-form pure-form-aligned" action="/inv/exportscanlog", method="post">
            <fieldset>
                <legend id="statusreport-legend">Actions</legend>
                <div class="pure-controls">
                <button type="submit" class="pure-button button-success" background="0xca3c3c">Export List</button>
                <span class="pure-form-message-inline desktop-only">Export scan log to file.</span>
                <input hidden name="all" value="all">
                </div>
            </fieldset>
        </form>
        <form id='dellist' class="pure-form pure-form-aligned" action="/inv/clearall", method="post">
            <fieldset>
                <div class="pure-controls">
                <button type="submit" class="pure-button button-error" background="0xca3c3c">Delete List</button>
                <span class="pure-form-message-inline desktop-only">Delete full list. USE WITH CAUTION.</span>
                </div>
            </fieldset>
        </form>
    </div>
{% endblock %}